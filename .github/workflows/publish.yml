name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main  # 배포할 브랜치 설정 (예: main 브랜치에 푸시될 때마다 실행)

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '16'

    - name: Install dependencies
      run: npm install  # 필요한 경우 `yarn install`을 사용할 수도 있습니다

    - name: Build the project
      run: npm run build  # 프로젝트 빌드 명령어를 여기에 넣습니다

    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist  # 빌드된 파일이 위치한 디렉토리 설정 (예: dist)



# name: Deploy website to GitHub Pages

# on:
#   # Trigger the workflow every time you push to the `main` branch
#   push:
#     branches: ["main"]
#   # Allows you to run this workflow manually from the Actions tab on GitHub.
#   workflow_dispatch:

# # Provide permission to clone the repo and deploy it to GitHub Pages
# permissions:
#   contents: read
#   pages: write
#   id-token: write

# concurrency:
#   group: "pages"
#   cancel-in-progress: false

# jobs:
#   # Build website
#   build:
#     runs-on: ubuntu-latest
#     steps:
#     - name: Checkout
#       uses: actions/checkout@v4
#       with:
#           fetch-depth: 0  # 풀 히스토리를 가져옴

#     - name: Install Node.js dependencies
#       uses: actions/setup-node@v3
#       with:
#         node-version: '16'
#     - run: npm install  # 또는 yarn install, 프로젝트에 따라 다름

#     - name: Build the project
#       run: npm run build  # 또는 프로젝트에 맞는 빌드 명령어 입력

#     - name: Setup Pages
#       id: pages
#       uses: actions/configure-pages@v3

#     - name: Upload artifact
#       uses: actions/upload-pages-artifact@v2
#       with:
#         path: ./dist  # 빌드된 파일의 경로를 지정

#   # Deploy website to GitHub Pages hosting
#   deploy:
#     environment:
#       name: github-pages
#       url: ${{ steps.deployment.outputs.page_url }}
#     runs-on: ubuntu-latest
#     needs: build
#     steps:
#     - name: Deploy to GitHub Pages
#       id: deployment
#       uses: actions/deploy-pages@v2